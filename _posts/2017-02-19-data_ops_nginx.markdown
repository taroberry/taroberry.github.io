---
layout: post
title:  nginx反向代理用于大数据软件管理
category: data_ops
description: 反向代理是nginx的重要功能，广泛用于web应用中。在大数据领域里，nginx的反向代理功能也是大有用处
---

反向代理是nginx的重要功能，广泛用于web应用中。在大数据领域里，虽然通常没有高并发的场景，nginx的反向代理功能仍然大有用处

### 后端日志收集
大数据领域的开源软件很多，其中不少软件是提供web服务或http接口。如果要统计各服务的访问次数，或者做安全审计，跟踪每个服务的访问明细，就需要分别收集各服务的日志。而各服务记录的日志格式不尽相同，记录的内容也不一致，日志的收集、存储都是问题。如果要直接在开源软件基础上修改，工作量会很大，为了日志修改开源软件也不是明智选择。

而如果各服务以nginx作为反向代理，只要nginx使用相同的日志配置，就很容易把日志格式统一。如果能把所有服务都接入nginx，就只要收集一份nginx的日志，就能知道所有服务的访问情况。

### 后端服务管理

一个服务使用过程中，难免会遇到重启、迁移地址等日常运维操作。如果以默认方式，通常以单进程的方式对外提供一个地址，这些运维操作可能就会导致服务中断。

传统的web应用，可以用nginx作为反向代理，接入多台部署相同应用的服务器，而在大数据领域同样可以使用，当然前提是应用要支持这样的无状态的负载均衡。此时，对外暴露的地址，不再是服务本身，而是nginx的地址，甚至是一个域名。只要nginx下的应用只要有一台可以正常工作，其他的无论怎么重启，或者变化地址，用户都是感知不到的。

### 服务监控

nginx具备了很完善的监控体系，很容易知道服务的qps、平均响应时间、5xx次数等，很容易掌控后端应用的运行情况。这些能力是大部分大数据开源软件不具备的。